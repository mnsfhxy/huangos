     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 E8 00000025                     	CALL	_init_palette
    18 00000008 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
    19 0000000F 50                              	PUSH	EAX
    20 00000010 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    21 00000017 50                              	PUSH	EAX
    22 00000018 FF 35 00000FF8                  	PUSH	DWORD [4088]
    23 0000001E E8 0000001D                     	CALL	_init_screen
    24 00000023 83 C4 0C                        	ADD	ESP,12
    25 00000026                                 L2:
    26 00000026 E8 [00000000]                   	CALL	_io_hlt
    27 0000002B EB F9                           	JMP	L2
    28                                          [SECTION .data]
    29 00000000                                 _table_rgb.0:
    30 00000000 00                              	DB	0
    31 00000001 00                              	DB	0
    32 00000002 00                              	DB	0
    33 00000003 FF                              	DB	-1
    34 00000004 00                              	DB	0
    35 00000005 00                              	DB	0
    36 00000006 00                              	DB	0
    37 00000007 FF                              	DB	-1
    38 00000008 00                              	DB	0
    39 00000009 FF                              	DB	-1
    40 0000000A FF                              	DB	-1
    41 0000000B 00                              	DB	0
    42 0000000C 00                              	DB	0
    43 0000000D 00                              	DB	0
    44 0000000E FF                              	DB	-1
    45 0000000F FF                              	DB	-1
    46 00000010 00                              	DB	0
    47 00000011 FF                              	DB	-1
    48 00000012 00                              	DB	0
    49 00000013 FF                              	DB	-1
    50 00000014 FF                              	DB	-1
    51 00000015 FF                              	DB	-1
    52 00000016 FF                              	DB	-1
    53 00000017 FF                              	DB	-1
    54 00000018 C6                              	DB	-58
    55 00000019 C6                              	DB	-58
    56 0000001A C6                              	DB	-58
    57 0000001B 84                              	DB	-124
    58 0000001C 00                              	DB	0
    59 0000001D 00                              	DB	0
    60 0000001E 00                              	DB	0
    61 0000001F 84                              	DB	-124
    62 00000020 00                              	DB	0
    63 00000021 84                              	DB	-124
    64 00000022 84                              	DB	-124
    65 00000023 00                              	DB	0
    66 00000024 00                              	DB	0
    67 00000025 00                              	DB	0
    68 00000026 84                              	DB	-124
    69 00000027 84                              	DB	-124
    70 00000028 00                              	DB	0
    71 00000029 84                              	DB	-124
    72 0000002A 00                              	DB	0
    73 0000002B 84                              	DB	-124
    74 0000002C 84                              	DB	-124
    75 0000002D 84                              	DB	-124
    76 0000002E 84                              	DB	-124
    77 0000002F 84                              	DB	-124
    78                                          [SECTION .text]
    79 0000002D                                 	GLOBAL	_init_palette
    80 0000002D                                 _init_palette:
    81 0000002D 55                              	PUSH	EBP
    82 0000002E 89 E5                           	MOV	EBP,ESP
    83 00000030 68 [00000000]                   	PUSH	_table_rgb.0
    84 00000035 6A 0F                           	PUSH	15
    85 00000037 6A 00                           	PUSH	0
    86 00000039 E8 0000017C                     	CALL	_set_palette
    87 0000003E C9                              	LEAVE
    88 0000003F C3                              	RET
    89 00000040                                 	GLOBAL	_init_screen
    90 00000040                                 _init_screen:
    91 00000040 55                              	PUSH	EBP
    92 00000041 89 E5                           	MOV	EBP,ESP
    93 00000043 57                              	PUSH	EDI
    94 00000044 56                              	PUSH	ESI
    95 00000045 53                              	PUSH	EBX
    96 00000046 83 EC 14                        	SUB	ESP,20
    97 00000049 0F BF 5D 0C                     	MOVSX	EBX,WORD [12+EBP]
    98 0000004D 0F BF 45 10                     	MOVSX	EAX,WORD [16+EBP]
    99 00000051 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   100 00000054 8D 7B FF                        	LEA	EDI,DWORD [-1+EBX]
   101 00000057 83 E8 1D                        	SUB	EAX,29
   102 0000005A 8D 73 FC                        	LEA	ESI,DWORD [-4+EBX]
   103 0000005D 50                              	PUSH	EAX
   104 0000005E 57                              	PUSH	EDI
   105 0000005F 6A 00                           	PUSH	0
   106 00000061 6A 00                           	PUSH	0
   107 00000063 6A 0E                           	PUSH	14
   108 00000065 53                              	PUSH	EBX
   109 00000066 FF 75 08                        	PUSH	DWORD [8+EBP]
   110 00000069 E8 000001D4                     	CALL	_boxfill8
   111 0000006E 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   112 00000071 83 E8 1C                        	SUB	EAX,28
   113 00000074 50                              	PUSH	EAX
   114 00000075 57                              	PUSH	EDI
   115 00000076 50                              	PUSH	EAX
   116 00000077 6A 00                           	PUSH	0
   117 00000079 6A 08                           	PUSH	8
   118 0000007B 53                              	PUSH	EBX
   119 0000007C FF 75 08                        	PUSH	DWORD [8+EBP]
   120 0000007F E8 000001BE                     	CALL	_boxfill8
   121 00000084 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   122 00000087 83 C4 38                        	ADD	ESP,56
   123 0000008A 83 E8 1B                        	SUB	EAX,27
   124 0000008D 50                              	PUSH	EAX
   125 0000008E 57                              	PUSH	EDI
   126 0000008F 50                              	PUSH	EAX
   127 00000090 6A 00                           	PUSH	0
   128 00000092 6A 07                           	PUSH	7
   129 00000094 53                              	PUSH	EBX
   130 00000095 FF 75 08                        	PUSH	DWORD [8+EBP]
   131 00000098 E8 000001A5                     	CALL	_boxfill8
   132 0000009D 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   133 000000A0 48                              	DEC	EAX
   134 000000A1 50                              	PUSH	EAX
   135 000000A2 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   136 000000A5 57                              	PUSH	EDI
   137 000000A6 83 E8 1A                        	SUB	EAX,26
   138 000000A9 50                              	PUSH	EAX
   139 000000AA 8D 7B D1                        	LEA	EDI,DWORD [-47+EBX]
   140 000000AD 6A 00                           	PUSH	0
   141 000000AF 6A 08                           	PUSH	8
   142 000000B1 53                              	PUSH	EBX
   143 000000B2 FF 75 08                        	PUSH	DWORD [8+EBP]
   144 000000B5 E8 00000188                     	CALL	_boxfill8
   145 000000BA 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   146 000000BD 83 C4 38                        	ADD	ESP,56
   147 000000C0 83 E8 18                        	SUB	EAX,24
   148 000000C3 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   149 000000C6 50                              	PUSH	EAX
   150 000000C7 6A 3B                           	PUSH	59
   151 000000C9 50                              	PUSH	EAX
   152 000000CA 6A 03                           	PUSH	3
   153 000000CC 6A 07                           	PUSH	7
   154 000000CE 53                              	PUSH	EBX
   155 000000CF FF 75 08                        	PUSH	DWORD [8+EBP]
   156 000000D2 E8 0000016B                     	CALL	_boxfill8
   157 000000D7 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   158 000000DA 83 E8 04                        	SUB	EAX,4
   159 000000DD 50                              	PUSH	EAX
   160 000000DE 89 45 E8                        	MOV	DWORD [-24+EBP],EAX
   161 000000E1 6A 02                           	PUSH	2
   162 000000E3 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   163 000000E6 6A 02                           	PUSH	2
   164 000000E8 6A 07                           	PUSH	7
   165 000000EA 53                              	PUSH	EBX
   166 000000EB FF 75 08                        	PUSH	DWORD [8+EBP]
   167 000000EE E8 0000014F                     	CALL	_boxfill8
   168 000000F3 83 C4 38                        	ADD	ESP,56
   169 000000F6 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   170 000000F9 6A 3B                           	PUSH	59
   171 000000FB FF 75 E8                        	PUSH	DWORD [-24+EBP]
   172 000000FE 6A 03                           	PUSH	3
   173 00000100 6A 0F                           	PUSH	15
   174 00000102 53                              	PUSH	EBX
   175 00000103 FF 75 08                        	PUSH	DWORD [8+EBP]
   176 00000106 E8 00000137                     	CALL	_boxfill8
   177 0000010B 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   178 0000010E 83 E8 05                        	SUB	EAX,5
   179 00000111 50                              	PUSH	EAX
   180 00000112 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   181 00000115 6A 3B                           	PUSH	59
   182 00000117 83 E8 17                        	SUB	EAX,23
   183 0000011A 50                              	PUSH	EAX
   184 0000011B 89 45 E4                        	MOV	DWORD [-28+EBP],EAX
   185 0000011E 6A 3B                           	PUSH	59
   186 00000120 6A 0F                           	PUSH	15
   187 00000122 53                              	PUSH	EBX
   188 00000123 FF 75 08                        	PUSH	DWORD [8+EBP]
   189 00000126 E8 00000117                     	CALL	_boxfill8
   190 0000012B 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   191 0000012E 83 C4 38                        	ADD	ESP,56
   192 00000131 83 E8 03                        	SUB	EAX,3
   193 00000134 89 45 E0                        	MOV	DWORD [-32+EBP],EAX
   194 00000137 50                              	PUSH	EAX
   195 00000138 6A 3B                           	PUSH	59
   196 0000013A 50                              	PUSH	EAX
   197 0000013B 6A 02                           	PUSH	2
   198 0000013D 6A 00                           	PUSH	0
   199 0000013F 53                              	PUSH	EBX
   200 00000140 FF 75 08                        	PUSH	DWORD [8+EBP]
   201 00000143 E8 000000FA                     	CALL	_boxfill8
   202 00000148 FF 75 E0                        	PUSH	DWORD [-32+EBP]
   203 0000014B 6A 3C                           	PUSH	60
   204 0000014D FF 75 EC                        	PUSH	DWORD [-20+EBP]
   205 00000150 6A 3C                           	PUSH	60
   206 00000152 6A 00                           	PUSH	0
   207 00000154 53                              	PUSH	EBX
   208 00000155 FF 75 08                        	PUSH	DWORD [8+EBP]
   209 00000158 E8 000000E5                     	CALL	_boxfill8
   210 0000015D 83 C4 38                        	ADD	ESP,56
   211 00000160 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   212 00000163 56                              	PUSH	ESI
   213 00000164 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   214 00000167 57                              	PUSH	EDI
   215 00000168 6A 0F                           	PUSH	15
   216 0000016A 53                              	PUSH	EBX
   217 0000016B FF 75 08                        	PUSH	DWORD [8+EBP]
   218 0000016E E8 000000CF                     	CALL	_boxfill8
   219 00000173 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   220 00000176 57                              	PUSH	EDI
   221 00000177 FF 75 E4                        	PUSH	DWORD [-28+EBP]
   222 0000017A 57                              	PUSH	EDI
   223 0000017B 6A 0F                           	PUSH	15
   224 0000017D 53                              	PUSH	EBX
   225 0000017E FF 75 08                        	PUSH	DWORD [8+EBP]
   226 00000181 E8 000000BC                     	CALL	_boxfill8
   227 00000186 83 C4 38                        	ADD	ESP,56
   228 00000189 FF 75 E0                        	PUSH	DWORD [-32+EBP]
   229 0000018C 56                              	PUSH	ESI
   230 0000018D FF 75 E0                        	PUSH	DWORD [-32+EBP]
   231 00000190 57                              	PUSH	EDI
   232 00000191 6A 07                           	PUSH	7
   233 00000193 53                              	PUSH	EBX
   234 00000194 FF 75 08                        	PUSH	DWORD [8+EBP]
   235 00000197 E8 000000A6                     	CALL	_boxfill8
   236 0000019C 8D 43 FD                        	LEA	EAX,DWORD [-3+EBX]
   237 0000019F FF 75 E0                        	PUSH	DWORD [-32+EBP]
   238 000001A2 50                              	PUSH	EAX
   239 000001A3 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   240 000001A6 50                              	PUSH	EAX
   241 000001A7 6A 07                           	PUSH	7
   242 000001A9 53                              	PUSH	EBX
   243 000001AA FF 75 08                        	PUSH	DWORD [8+EBP]
   244 000001AD E8 00000090                     	CALL	_boxfill8
   245 000001B2 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   246 000001B5 5B                              	POP	EBX
   247 000001B6 5E                              	POP	ESI
   248 000001B7 5F                              	POP	EDI
   249 000001B8 5D                              	POP	EBP
   250 000001B9 C3                              	RET
   251 000001BA                                 	GLOBAL	_set_palette
   252 000001BA                                 _set_palette:
   253 000001BA 55                              	PUSH	EBP
   254 000001BB 89 E5                           	MOV	EBP,ESP
   255 000001BD 57                              	PUSH	EDI
   256 000001BE 56                              	PUSH	ESI
   257 000001BF 53                              	PUSH	EBX
   258 000001C0 51                              	PUSH	ECX
   259 000001C1 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   260 000001C4 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   261 000001C7 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   262 000001CA E8 [00000000]                   	CALL	_io_load_eflags
   263 000001CF 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   264 000001D2 E8 [00000000]                   	CALL	_io_cli
   265 000001D7 53                              	PUSH	EBX
   266 000001D8 68 000003C8                     	PUSH	968
   267 000001DD E8 [00000000]                   	CALL	_io_out8
   268 000001E2 39 FB                           	CMP	EBX,EDI
   269 000001E4 58                              	POP	EAX
   270 000001E5 5A                              	POP	EDX
   271 000001E6 7E 12                           	JLE	L12
   272 000001E8                                 L14:
   273 000001E8 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   274 000001EB 89 45 08                        	MOV	DWORD [8+EBP],EAX
   275 000001EE 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   276 000001F1 5B                              	POP	EBX
   277 000001F2 5E                              	POP	ESI
   278 000001F3 5F                              	POP	EDI
   279 000001F4 5D                              	POP	EBP
   280 000001F5 E9 [00000000]                   	JMP	_io_store_eflags
   281 000001FA                                 L12:
   282 000001FA 8A 06                           	MOV	AL,BYTE [ESI]
   283 000001FC 43                              	INC	EBX
   284 000001FD C0 E8 02                        	SHR	AL,2
   285 00000200 0F B6 C0                        	MOVZX	EAX,AL
   286 00000203 50                              	PUSH	EAX
   287 00000204 68 000003C9                     	PUSH	969
   288 00000209 E8 [00000000]                   	CALL	_io_out8
   289 0000020E 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   290 00000211 C0 E8 02                        	SHR	AL,2
   291 00000214 0F B6 C0                        	MOVZX	EAX,AL
   292 00000217 50                              	PUSH	EAX
   293 00000218 68 000003C9                     	PUSH	969
   294 0000021D E8 [00000000]                   	CALL	_io_out8
   295 00000222 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   296 00000225 C0 E8 02                        	SHR	AL,2
   297 00000228 83 C6 03                        	ADD	ESI,3
   298 0000022B 0F B6 C0                        	MOVZX	EAX,AL
   299 0000022E 50                              	PUSH	EAX
   300 0000022F 68 000003C9                     	PUSH	969
   301 00000234 E8 [00000000]                   	CALL	_io_out8
   302 00000239 83 C4 18                        	ADD	ESP,24
   303 0000023C 39 FB                           	CMP	EBX,EDI
   304 0000023E 7E BA                           	JLE	L12
   305 00000240 EB A6                           	JMP	L14
   306 00000242                                 	GLOBAL	_boxfill8
   307 00000242                                 _boxfill8:
   308 00000242 55                              	PUSH	EBP
   309 00000243 89 E5                           	MOV	EBP,ESP
   310 00000245 57                              	PUSH	EDI
   311 00000246 56                              	PUSH	ESI
   312 00000247 53                              	PUSH	EBX
   313 00000248 57                              	PUSH	EDI
   314 00000249 57                              	PUSH	EDI
   315 0000024A 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   316 0000024D 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   317 00000250 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   318 00000253 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   319 00000256 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   320 00000259 7F 32                           	JG	L27
   321 0000025B 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   322 0000025E 0F AF D9                        	IMUL	EBX,ECX
   323 00000261                                 L25:
   324 00000261 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   325 00000264 39 FA                           	CMP	EDX,EDI
   326 00000266 7F 1C                           	JG	L29
   327 00000268 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   328 0000026B 01 D8                           	ADD	EAX,EBX
   329 0000026D 8D 04 10                        	LEA	EAX,DWORD [EAX+EDX*1]
   330 00000270 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   331 00000273                                 L24:
   332 00000273 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   333 00000276 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   334 00000279 42                              	INC	EDX
   335 0000027A 88 06                           	MOV	BYTE [ESI],AL
   336 0000027C 46                              	INC	ESI
   337 0000027D 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   338 00000280 39 FA                           	CMP	EDX,EDI
   339 00000282 7E EF                           	JLE	L24
   340 00000284                                 L29:
   341 00000284 41                              	INC	ECX
   342 00000285 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   343 00000288 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   344 0000028B 7E D4                           	JLE	L25
   345 0000028D                                 L27:
   346 0000028D 5B                              	POP	EBX
   347 0000028E 5E                              	POP	ESI
   348 0000028F 5B                              	POP	EBX
   349 00000290 5E                              	POP	ESI
   350 00000291 5F                              	POP	EDI
   351 00000292 5D                              	POP	EBP
   352 00000293 C3                              	RET
